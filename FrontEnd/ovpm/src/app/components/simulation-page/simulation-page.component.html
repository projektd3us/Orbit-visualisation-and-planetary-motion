<div class="main-container">
    <div class="form-wrapper">
        <h1>Planet Search</h1>
        <form [formGroup]="planetForm" class="form-container"  (submit)="onSubmit()">

            <mat-form-field appearance="fill" required>
                <mat-label>Planet Name</mat-label>
                <input matInput formControlName="pl_name">
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>Discovery Method</mat-label>
                <mat-select formControlName="disc_method">
                    <mat-option *ngFor="let item of discoveryMethods" [value]="item.value">{{item.name}}</mat-option>
                </mat-select>
            </mat-form-field>

            <button type="submit" mat-raised-button color="primary">Find Planet</button>

        </form>
    </div>

    <div class="table-wrapper">
        <h1>Planets Found by Criteria</h1>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <!-- Planet Name Column -->
            <ng-container matColumnDef="pl_name">
                <th mat-header-cell *matHeaderCellDef> Planet Name </th>
                <td mat-cell *matCellDef="let element"> {{element.pl_name}} </td>
            </ng-container>

            <!-- Host Column -->
            <ng-container matColumnDef="hostname">
                <th mat-header-cell *matHeaderCellDef> Host Name </th>
                <td mat-cell *matCellDef="let element"> {{element.hostname}} </td>
            </ng-container>

            <!-- Disc Column -->
            <ng-container matColumnDef="discoverymethod">
                <th mat-header-cell *matHeaderCellDef> Discovery Method </th>
                <td mat-cell *matCellDef="let element"> {{element.discoverymethod}} </td>
            </ng-container>

            <!-- disc_pubdate Column -->
            <ng-container matColumnDef="disc_pubdate">
                <th mat-header-cell *matHeaderCellDef> Discovery Date </th>
                <td mat-cell *matCellDef="let element"> {{element.disc_pubdate}} </td>
            </ng-container>
        
            <!-- Planet Mass Column -->
            <ng-container matColumnDef="pl_masse">
                <th mat-header-cell *matHeaderCellDef> Mass </th>
                <td mat-cell *matCellDef="let element"> {{element.pl_masse}} </td>
            </ng-container>

            <!-- Planet Density Column -->
            <ng-container matColumnDef="pl_dens">
                <th mat-header-cell *matHeaderCellDef>  Density </th>
                <td mat-cell *matCellDef="let element"> {{element.pl_dens}} </td>
            </ng-container>
        
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="planetSelected(row)"></tr>

            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">Please fill in some search criteria and find a planet!</td>
            </tr>

        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]"
            showFirstLastButtons 
            aria-label="Select page of periodic elements">
        </mat-paginator>
    </div>

    <div class="card-wrapper">
        <h1>Selected Planet</h1>
        <mat-card class="example-card">
            <mat-card-header>
            <div mat-card-avatar>
                <mat-icon class="avatar">public</mat-icon>
            </div>
            <mat-card-title>{{currentlySelectedPlanet.pl_name}}</mat-card-title>
            <mat-card-subtitle>
                <p>Planet in {{currentlySelectedPlanet.hostname}}</p>
                <p class="sec-sub">Discovered through {{currentlySelectedPlanet.discoverymethod}}</p>
            </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <div class="info-wrapper" *ngIf="currentlySelectedPlanet.pl_masse != 0">
                    <p>{{currentlySelectedPlanet.pl_name}} is hosted within the {{currentlySelectedPlanet.hostname}} planetary system. It was discovered using the {{currentlySelectedPlanet.discoverymethod}} method, and published at the date of {{currentlySelectedPlanet.disc_pubdate}}.</p>

                    <p>Planet Mass is: {{currentlySelectedPlanet.pl_masse}}</p>
                    <p>Planet Density is: {{currentlySelectedPlanet.pl_dens}}</p>
                </div>
                <p *ngIf="!(currentlySelectedPlanet.pl_masse != 0)"> Select a planet from the table</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-raised-button color="accent" [disabled]="isSimRunning || !(currentlySelectedPlanet.pl_masse != 0)" (click)="runSimulation()">
                    Run Simulation
                    <mat-icon>play_arrow</mat-icon>
                </button>
                <button mat-raised-button color="warn" [disabled]="!isSimRunning" (click)="stopSimulation()">
                    Stop
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
    </div>

</div>

